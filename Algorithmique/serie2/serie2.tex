				% ENABLE or DISABLE font change
				% use XeLaTeX if true
\newif\ifdys
				\dystrue
				\dysfalse

\newif\ifsolutions
				\solutionstrue
				\solutionsfalse

\input{../preamble.tex}

\AdvanceDate[0]

\begin{document}
\pagestyle{fancy}
\fancyhead[L]{Seconde 13}
\fancyhead[C]{\textbf{Algorithmique : complexité et temps d'execution \ifsolutions \, -- Solutions  \fi}}
\fancyhead[R]{\today}

\exe{
	On considère différentes fonctions de la figure \ref{fig:1} qui servent à calculer la somme
		\[ S = 1 + 2 + \dots + (N-1) + N, \]
	pour un $N\in\N$ entier naturel donné.
	
	Implémenter (compléter?) les algorithmes et répondre aux questions suivantes.
	
	\begin{enumerate}
		\item Appeler les fonctions \texttt{somme(N)} et \texttt{sommeclose(N)} pour $N=0, 1, 5, 10, 2^{10}, 2^{25}, 2^{28}$.
		Que dire sur les valeurs retournées ? Que dire sur le temps d'execution ?
		\item Combien d'opérations arithmétiques sont nécessaires pour que \texttt{somme(N)} termine ? 
		\item Combien d'opérations arithmétiques sont nécessaires pour que \texttt{somme\_close(N)} termine ? 
	\end{enumerate}
}{}

\begin{figure}[h!]
\begin{subfigure}{.5\textwidth}
\begin{mintedbox}{python}
def somme(N):
	S = 0
	for i in range(1,N+1):
		S = S+i
	return S
\end{mintedbox}
\caption{Algorithme 1}
\end{subfigure}
\begin{subfigure}{.5\textwidth}
\begin{mintedbox}{python}
def sommeclose(N):
	return N*(N+1)/2
\end{mintedbox}
\caption{Algorithme 2}
\end{subfigure}
\caption{Algorithmes de calcul de somme $S = 1 + \dots N$.}
\label{fig:1}
\end{figure}

\exe{
	On considère différentes fonctions de la figure \ref{fig:2} qui servent à calculer la somme
		\[ S = 1^3 + 2^3 + \dots + (N-1)^3 + N^3, \]
	pour un $N\in\N$ entier naturel donné.
	
	Implémenter (compléter?) les algorithmes et répondre aux questions suivantes.
	
	\begin{enumerate}
		\item Appeler les fonctions \texttt{somme3(N)} et \texttt{somme3close(N)} pour $N=1, 2, 5, 9, 2^{10}, 2^{23}, 2^{25}$.
		Que dire sur les valeurs retournées ? Que dire sur le temps d'execution ?
		\item Combien d'opérations arithmétiques sont nécessaires pour que \texttt{somme3(N)} termine ? 
		\item Combien d'opérations arithmétiques sont nécessaires pour que \texttt{somme3\_close(N)} termine ? 
	\end{enumerate}
}{}

\begin{figure}[h!]
\begin{subfigure}{.5\textwidth}
\begin{mintedbox}{python}
def somme3(N):
	S = 0
	for i in range(1,N+1):
		S = S+i**3
	return S
\end{mintedbox}
\caption{Algorithme 1}
\label{fig:2a}
\end{subfigure}
\begin{subfigure}{.5\textwidth}
\begin{mintedbox}{python}
def somme3_close(N):
	return (N*(N+1)/2)**2
\end{mintedbox}
\caption{Algorithme 2}
\end{subfigure}
\caption{Algorithmes de calcul de somme $S = 1^3 + \dots N^3$.}
\label{fig:2}
\end{figure}

\newpage

\exe{[Exponentiation rapide]
	Le but de l'exercice est de calculer $q^N$ le plus vite possible, où $q, N\in\N$ sont deux entiers naturels.
	On se restreint aux opérations $+$ et $\times$ afin de pouvoir compter les opérations arithmétique de base (la puissance n'en est pas une !).
	
	\begin{enumerate}
		\item Créer une fonction \texttt{puissance(q,N)} qui retourne $q^N$ en utilisant uniquement la multiplication.
		\item Combien de multiplications sont nécessaires pour  \texttt{puissance(q,N)} termine ?
		\item Considérons l'algorithme \texttt{fastexp}. Que retourne l'appel \texttt{fastexp(q, 1)} ? et \texttt{fastexp(q, 2)},  \texttt{fastexp(q, 3)} ?
		\item En déduire que si $N=2^n$, alors  \texttt{fastexp(q, n)} retourne $q^N$ en $n$ opérations arithmétiques.
		\item Comparer le nombre d'opérations arithmétiques nécessaires au calcul de $q^{1024}$ en utilisant \texttt{puissance(q,1024)} versus \texttt{fastexp(q, 10)}
	\end{enumerate}
}{}

% fast exponentiation
\begin{mintedbox}{python}
def fastexp(q, n):
	r = q
	for i in range(1,n+1):
		r = r**2
	return r
\end{mintedbox}

% SOMME(N) RECURSIVE
%\begin{mintedbox}{python}
%def somme_recursive(N):
%	if N==0:
%		return 0
%	return N+somme_recursive(N-1)
%\end{mintedbox}

\end{document}
